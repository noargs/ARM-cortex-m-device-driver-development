/*
 * 	Switch to HSE as system clock and measure it
 *
 *	Steps: (for STM32F407 Discovery board)
 *	1. Enable the HSE clock using HSEON bit (RCC_CR)
 *	2. Wait until HSE clock from the external crystal stabilises (only
 *	   if crystal is connected)(indicates if the high-speed external
 *	   oscillator is stable or not)
 *	3. Switch the system clock to HSE (RCC_CFGR)
 *	4. Do MCO1 settings to measure it
 *
 *	Steps: (for Nucleo board)
 *	1. Enable the HSEBYP bit (RCC_CR) (bypass the oscillator with an external clock)
 *	2. Enable the HSE clock using HSEON bit (RCC_CR)
 *	3. Switch the system clock to HSE
 *	4. Do MCO1 settings to measure it
 */


#include <stdint.h>

#define RCC_BASE_ADDR            0x40023800UL   // Reference Manual page 65
#define RCC_CFGR_REG_OFFSET      0x08UL         // Reference Manual page 228
#define RCC_CFGR_REG_ADDR        ( RCC_BASE_ADDR + RCC_CFGR_REG_OFFSET )
#define GPIOA_BASE_ADDR          0x40020000UL   // Datasheet page 73

int main(void)
{
    // Steps for Discovery board
	// 1. Enable the HSE clock using HSEO bit (RCC_CR) - Reference Manual Page: 224

	// 2. Wait until HSE clock from the external crystal stabilises (only if crystal is connected)
	// 3. Switch the system clock to HSE (RCC_CFGR)
	// 4. Do MCO1 settings to measure it
	for(;;);
}
